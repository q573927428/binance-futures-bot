# 币安 USDT 永续合约自动交易系统

基于 Nuxt 4 + Vue 3 + Node.js 的币安永续合约自动交易机器人，采用日内低频交易策略。

## ✨ 功能特性

- ✅ **多交易对监控**：实时监控 ETH/USDT、BTC/USDT、BNB/USDT、SOL/USDT 等主流交易对
- ✅ **智能交易策略**：基于 ADX（15m / 1h / 4h）多周期趋势确认的智能交易决策
- ✅ **多层保护机制**：完整的熔断、止损、止盈、超时保护等风险控制
- ✅ **状态持久化**：交易状态、配置数据自动保存，支持跨天自动重置
- ✅ **全自动运行**：自动分析行情、开仓、监控、平仓、撤单，无需人工干预
- ✅ **响应式UI界面**：基于 Element Plus 的现代化界面，支持移动端和桌面端
- ✅ **模拟交易支持**：支持币安模拟交易和真实交易一键切换
- ✅ **AI分析增强**：DeepSeek AI 技术分析支持，提供更精准的交易建议

## 🚀 快速开始

### 1. 安装依赖

```bash
pnpm install
```

### 2. 配置环境变量

⚠️ **重要**：启动系统前必须先配置Binance API密钥！

#### 第一次使用：

```bash
# 1. 复制环境变量示例文件
copy .env.example .env

# 2. 编辑 .env 文件，填入你的API密钥
```

`.env` 文件配置：

```bash
# Binance API配置 (必填)
BINANCE_API_KEY=你的币安API密钥
BINANCE_SECRET=你的币安API密钥密文

# DeepSeek AI 配置 (可选，不填则禁用AI分析)
DEEPSEEK_API_KEY=你的DeepSeek_API密钥
DEEPSEEK_API_URL=https://api.deepseek.com
```

📖 **详细配置教程**：请查看 [API配置指南.md](./API配置指南.md)，包含：
- 如何获取Binance API密钥
- API权限设置说明
- 安全建议
- 常见问题解决方案

### 3. 启动开发服务器

```bash
pnpm dev
```

访问 http://localhost:3000 即可使用系统。

### 4. 构建生产版本

```bash
pnpm build
pnpm preview
```

## 📋 交易策略说明

### 核心过滤条件（必须全部满足）

- ADX(15m) ≥ 20
- ADX(1h) ≥ 22
- ADX(4h) ≥ 25
- AI分析评分 >= 60（如启用AI）
- AI分析看涨（如启用AI）

### 方向判定

- **做多**：EMA20 > EMA60 且 价格 > EMA20
- **做空**：EMA20 < EMA60 且 价格 < EMA20

### 入场条件

#### 做多（Long）
- 多头趋势成立
- 价格回踩 EMA20 / EMA30（±0.2%）
- RSI(14,15m) ∈ [40,60]
- 最近K线为确认阳线或明显下影线

#### 做空（Short）
- 空头趋势成立
- 价格反弹至 EMA20 / EMA30
- RSI(14,15m) ∈ [40,60]
- 最近K线为确认阴线或明显上影线

### 止损与止盈

- **止损**：ATR(14,15m) × 1.2，最大止损 ≤ 1.5%
- **TP1**：盈亏比 ≥ 1:1 → 平 50%，止损移动至成本
- **TP2**：盈亏比 ≥ 1:2 / RSI 极值 / ADX 走弱 → 全平

### 风控规则

- 单笔最大风险 ≤ 账户权益 1%
- 杠杆：3x – 20x（可配置）
- 禁止加仓、禁止马丁
- 每日最多 3 笔交易
- 持仓超 6 小时且 ADX 下降 → 市价平仓
- 每日 23:30 强制平仓并重置状态

### 熔断规则（触发后当日停机）

- 当日亏损 ≥ 2%
- 连续 2 笔止损
- 下单 / API 异常
- AI 风险等级 = HIGH

## 🎯 使用指南

### 1. 启动机器人

1. 打开浏览器访问 http://localhost:3000
2. 点击"启动机器人"按钮
3. 系统自动开始监控市场并寻找交易机会

### 2. 监控状态

- **控制面板**：查看今日交易次数、盈亏、机器人状态
- **系统配置**：查看和修改杠杆、交易对、扫描间隔等配置
- **当前持仓**：查看持仓详情（如有）
- **交易历史**：查看今日所有交易记录
- **系统日志**：实时查看系统运行日志

### 3. 配置修改

点击"系统配置"卡片的"编辑"按钮，可以修改：

- 交易对
- 杠杆倍数
- 最大风险比例
- 扫描间隔
- 模拟/真实交易切换
- AI分析开关
- AI最小置信度

保存后配置立即生效。

### 4. 停止机器人

点击"停止机器人"按钮即可安全停止系统。

## ⚙️ 系统架构

```
binance-futures-bot/
├── app/                     # 前端（Nuxt 4）
│   ├── pages/              # 页面
│   ├── stores/             # Pinia 状态管理
│   └── app.vue             # 根组件
├── server/                  # 后端
│   ├── api/                # API 接口
│   ├── modules/
│   │   └── futures-bot/    # 交易机器人核心
│   └── utils/              # 工具函数
│       ├── binance.ts      # CCXT Binance 封装
│       ├── indicators.ts   # 技术指标
│       ├── ai-analysis.ts  # AI分析
│       ├── risk.ts         # 风控工具
│       ├── logger.ts       # 日志工具
│       └── storage.ts      # 数据持久化
├── types/                   # TypeScript 类型定义
├── data/                    # 状态配置 & 交易数据
├── logs/                    # 日志文件
└── .env                     # 环境变量配置
```

## 🛡️ 安全提示

1. **模拟交易测试**：建议先在模拟交易环境下测试系统
2. **API密钥安全**：请妥善保管您的API密钥，不要泄露给他人
3. **风险控制**：加密货币交易存在风险，请合理配置风险参数
4. **持续监控**：虽然系统可以自动运行，但建议定期查看运行状态
5. **网络稳定**：确保网络连接稳定，避免因网络问题导致交易失败

## 📊 技术栈

- **前端框架**：Nuxt 4 + Vue 3
- **UI组件库**：Element Plus
- **状态管理**：Pinia
- **交易所API**：CCXT
- **技术指标**：technicalindicators
- **AI分析**：DeepSeek API
- **时间处理**：dayjs
- **开发语言**：TypeScript

## 📝 注意事项

1. 本系统仅供学习和研究使用
2. 加密货币交易存在高风险，请谨慎使用
3. 使用真实资金前请充分测试
4. 作者不对任何交易损失负责
5. 请遵守当地法律法规

## 📄 License

MIT License

## 🤝 贡献

欢迎提交 Issue 和 Pull Request！

---

**免责声明**：本软件仅供学习和研究使用，不构成任何投资建议。加密货币交易存在高风险，您应该充分了解相关风险后再使用本软件。使用本软件进行交易造成的任何损失，作者概不负责。
